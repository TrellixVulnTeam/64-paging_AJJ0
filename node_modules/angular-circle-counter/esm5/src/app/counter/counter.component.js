/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, ElementRef, EventEmitter, HostListener, Input, Output } from '@angular/core';
import * as ease from 'ease-component';
var CounterComponent = /** @class */ (function () {
    function CounterComponent(hostElement) {
        this.hostElement = hostElement;
        this.mode = 'onInit';
        this.from = 0;
        this.to = 0;
        this.animationTime = 4000;
        this.animationType = 'linear';
        this.showCircle = true;
        this.circleColor = '#307bbb';
        this.fontSize = 150;
        this.delay = 0;
        this.finishedText = '';
        this.finished = new EventEmitter();
        this._hold = true;
        this._percentDone = 0;
        this._holdProgress = 0;
        this._finishedCounting = false;
        this.nativeElement = /** @type {?} */ (hostElement.nativeElement);
    }
    /**
     * @param {?} $event
     * @return {?}
     */
    CounterComponent.prototype.onWindowChange = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        if (this.mode !== 'viewport') {
            return;
        }
        if (this.hold && this.isElementInViewport()) {
            this.start();
        }
    };
    Object.defineProperty(CounterComponent.prototype, "startTimeout", {
        get: /**
         * @return {?}
         */
        function () {
            return this._startTimeout;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._startTimeout = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "nativeElement", {
        get: /**
         * @return {?}
         */
        function () {
            return this._nativeElement;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._nativeElement = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "holdProgress", {
        get: /**
         * @return {?}
         */
        function () {
            return this._holdProgress;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._holdProgress = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "percentDone", {
        get: /**
         * @return {?}
         */
        function () {
            return this._percentDone;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._percentDone = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "count", {
        get: /**
         * @return {?}
         */
        function () {
            return this._count;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._count = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "startTime", {
        get: /**
         * @return {?}
         */
        function () {
            return this._startTime;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._startTime = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "hold", {
        get: /**
         * @return {?}
         */
        function () {
            return this._hold;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._hold = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(CounterComponent.prototype, "finishedCounting", {
        get: /**
         * @return {?}
         */
        function () {
            return this._finishedCounting;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._finishedCounting = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    CounterComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.init();
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.start = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.delay > 0) {
            this.startTimeout = window.setTimeout(function () {
                _this.startAction();
            }, this.delay);
            return;
        }
        this.startAction();
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.stop = /**
     * @return {?}
     */
    function () {
        window.clearTimeout(this.startTimeout);
        this.hold = true;
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.restart = /**
     * @return {?}
     */
    function () {
        this.init();
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.init = /**
     * @return {?}
     */
    function () {
        this.hold = true;
        this.count = this.from;
        this.holdProgress = 0;
        this.startTime = undefined;
        this.percentDone = 0;
        this.finishedCounting = false;
        window.clearTimeout(this.startTimeout);
        if (typeof this.of === 'undefined') {
            this.of = this.to;
        }
        if (this.mode === 'onInit') {
            this.start();
        }
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.getCircleStyle = /**
     * @return {?}
     */
    function () {
        return {
            'clip': this.percentDone >= 0.5 ? 'rect(auto, auto, auto, auto)' : 'rect(0em, 1em, 1em, 0.5em)'
        };
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.getBarStyle = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ rotateDeg = 360 * this.percentDone;
        return {
            'transform': "rotate(" + rotateDeg + "deg)",
            'border-color': this.circleColor
        };
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.getFillStyle = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ rotateDeg = this.percentDone > 0.5 ? 180 : 0;
        return {
            'display': this.percentDone <= 0.5 ? 'none' : 'block',
            'transform': "rotate(" + rotateDeg + "deg)",
            'border-color': this.circleColor
        };
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.startAction = /**
     * @return {?}
     */
    function () {
        this.hold = false;
        this.requestFrame();
    };
    /**
     * @param {?} timestamp
     * @return {?}
     */
    CounterComponent.prototype.step = /**
     * @param {?} timestamp
     * @return {?}
     */
    function (timestamp) {
        if (!this.startTime) {
            this.startTime = timestamp;
        }
        var /** @type {?} */ progress = timestamp - this.startTime;
        progress += this.holdProgress;
        if (this.hold) {
            this.holdProgress = progress;
            this.startTime = undefined;
            return;
        }
        var /** @type {?} */ easeValue = ease[this.animationType](progress / this.animationTime);
        var /** @type {?} */ currentCount = Math.round(easeValue * this.to);
        if (currentCount >= this.to) {
            currentCount = this.to;
        }
        this.count = currentCount;
        this.percentDone = currentCount / this.of;
        if (progress < this.animationTime) {
            this.requestFrame();
            return;
        }
        // Finished
        this.finishedCounting = true;
        this.finished.emit();
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.requestFrame = /**
     * @return {?}
     */
    function () {
        window.requestAnimationFrame(this.step.bind(this));
    };
    /**
     * @return {?}
     */
    CounterComponent.prototype.isElementInViewport = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ rect = this.nativeElement.getBoundingClientRect();
        return (rect.top >= 0 &&
            rect.bottom <= (window.innerHeight || document.documentElement.clientHeight));
    };
    CounterComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-counter',
                    template: "<div class=\"ng-counter\" [style.font-size]=\"fontSize + 'px'\" [ngClass]=\"{'ng-counter--with-circle' : showCircle}\">\n    <div class=\"ng-counter__text\">\n        <ng-template [ngIf]=\"!finishedCounting || !finishedText.length\">\n            <span class=\"ng-counter__prefix\">\n                <ng-content select=\"ng-counter-prefix\"></ng-content>\n            </span>\n            <span class=\"ng-counter__number\">{{count}}</span>\n            <span class=\"ng-counter__suffix\">\n                <ng-content select=\"ng-counter-suffix\"></ng-content>\n            </span>\n        </ng-template>\n        <ng-template [ngIf]=\"finishedCounting && finishedText.length\">\n            <span class=\"ng-counter__finish_text\">{{finishedText}}</span>\n        </ng-template>\n    </div>\n    <div class=\"ng-counter__circle\" *ngIf=\"showCircle\" [ngStyle]=\"getCircleStyle()\">\n        <div class=\"ng-counter__circle__bar\" [ngStyle]=\"getBarStyle()\"></div>\n        <div class=\"ng-counter__circle__fill\" [ngStyle]=\"getFillStyle()\"></div>\n    </div>\n</div>",
                    styles: [".ng-counter{display:inline-block;position:relative;font-size:150px}.ng-counter.ng-counter--with-circle{width:1em;height:1em;box-sizing:content-box}.ng-counter.ng-counter--with-circle .ng-counter__text{align-items:center;justify-content:center;height:1em}.ng-counter__text{display:flex}.ng-counter__finish_text,.ng-counter__number,.ng-counter__prefix,.ng-counter__suffix{font-size:.3em}.ng-counter__circle{position:absolute;top:0;left:0;width:1em;height:1em;box-sizing:content-box}.ng-counter__circle__bar,.ng-counter__circle__fill{position:absolute;border:.08em solid;width:.84em;height:.84em;clip:rect(0,.5em,1em,0);border-radius:50%;box-sizing:content-box}"],
                },] },
    ];
    /** @nocollapse */
    CounterComponent.ctorParameters = function () { return [
        { type: ElementRef, },
    ]; };
    CounterComponent.propDecorators = {
        "mode": [{ type: Input },],
        "from": [{ type: Input },],
        "to": [{ type: Input },],
        "of": [{ type: Input },],
        "animationTime": [{ type: Input },],
        "animationType": [{ type: Input },],
        "showCircle": [{ type: Input },],
        "circleColor": [{ type: Input },],
        "fontSize": [{ type: Input },],
        "delay": [{ type: Input },],
        "finishedText": [{ type: Input },],
        "finished": [{ type: Output },],
        "onWindowChange": [{ type: HostListener, args: ['window:scroll', ['$event'],] }, { type: HostListener, args: ['window:resize', ['$event'],] },],
    };
    return CounterComponent;
}());
export { CounterComponent };
function CounterComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    CounterComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    CounterComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    CounterComponent.propDecorators;
    /** @type {?} */
    CounterComponent.prototype.mode;
    /** @type {?} */
    CounterComponent.prototype.from;
    /** @type {?} */
    CounterComponent.prototype.to;
    /** @type {?} */
    CounterComponent.prototype.of;
    /** @type {?} */
    CounterComponent.prototype.animationTime;
    /** @type {?} */
    CounterComponent.prototype.animationType;
    /** @type {?} */
    CounterComponent.prototype.showCircle;
    /** @type {?} */
    CounterComponent.prototype.circleColor;
    /** @type {?} */
    CounterComponent.prototype.fontSize;
    /** @type {?} */
    CounterComponent.prototype.delay;
    /** @type {?} */
    CounterComponent.prototype.finishedText;
    /** @type {?} */
    CounterComponent.prototype.finished;
    /** @type {?} */
    CounterComponent.prototype._hold;
    /** @type {?} */
    CounterComponent.prototype._count;
    /** @type {?} */
    CounterComponent.prototype._startTime;
    /** @type {?} */
    CounterComponent.prototype._percentDone;
    /** @type {?} */
    CounterComponent.prototype._holdProgress;
    /** @type {?} */
    CounterComponent.prototype._nativeElement;
    /** @type {?} */
    CounterComponent.prototype._startTimeout;
    /** @type {?} */
    CounterComponent.prototype._finishedCounting;
    /** @type {?} */
    CounterComponent.prototype.hostElement;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY291bnRlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyLWNpcmNsZS1jb3VudGVyLyIsInNvdXJjZXMiOlsic3JjL2FwcC9jb3VudGVyL2NvdW50ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDdkcsT0FBTyxLQUFLLElBQUksTUFBTSxnQkFBZ0IsQ0FBQzs7SUEwRG5DLDBCQUFvQixXQUF1QjtRQUF2QixnQkFBVyxHQUFYLFdBQVcsQ0FBWTtvQkEvQm5CLFFBQVE7b0JBQ1IsQ0FBQztrQkFDSCxDQUFDOzZCQUVVLElBQUk7NkJBQ0osUUFBUTswQkFDVixJQUFJOzJCQUNKLFNBQVM7d0JBQ1osR0FBRztxQkFDTixDQUFDOzRCQUNNLEVBQUU7d0JBQ2IsSUFBSSxZQUFZLEVBQUU7cUJBQ2QsSUFBSTs0QkFHRSxDQUFDOzZCQUNBLENBQUM7aUNBR0ksS0FBSztRQWF0QyxJQUFJLENBQUMsYUFBYSxxQkFBRyxXQUFXLENBQUMsYUFBNEIsQ0FBQSxDQUFDO0tBQ2pFOzs7OztJQVhELHlDQUFjOzs7O2NBQUMsTUFBTTtRQUNqQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUM7WUFDM0IsTUFBTSxDQUFDO1NBQ1Y7UUFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7U0FDaEI7O0lBT0wsc0JBQUksMENBQVk7Ozs7UUFBaEI7WUFDSSxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztTQUM3Qjs7Ozs7UUFFRCxVQUFpQixLQUFLO1lBQ2xCLElBQUks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QixNQUFNLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7Ozs7SUFHL0MsOENBQW1COzs7O1FBQ3ZCLHFCQUFNLElBQUksR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDeEQsTUFBTSxDQUFDLENBQ0gsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1lBQ2IsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLElBQUksUUFBUSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FDL0UsQ0FBQzs7O2dCQW5PVCxTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLGFBQWE7b0JBQ3ZCLFFBQVEsRUFBRSxtakNBbUJQO29CQUNILE1BQU0sRUFBRSxDQUFDLG9wQkFBb3BCLENBQUM7aUJBQ2pxQjs7OztnQkExQmtCLFVBQVU7Ozt5QkE0QnhCLEtBQUs7eUJBQ0wsS0FBSzt1QkFDTCxLQUFLO3VCQUNMLEtBQUs7a0NBQ0wsS0FBSztrQ0FDTCxLQUFLOytCQUNMLEtBQUs7Z0NBQ0wsS0FBSzs2QkFDTCxLQUFLOzBCQUNMLEtBQUs7aUNBQ0wsS0FBSzs2QkFDTCxNQUFNO21DQVNOLFlBQVksU0FBQyxlQUFlLEVBQUUsQ0FBQyxRQUFRLENBQUMsY0FDeEMsWUFBWSxTQUFDLGVBQWUsRUFBRSxDQUFDLFFBQVEsQ0FBQzs7MkJBakQ3Qzs7U0EyQmEsZ0JBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgZWFzZSBmcm9tICdlYXNlLWNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYXBwLWNvdW50ZXInLFxuICAgIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cIm5nLWNvdW50ZXJcIiBbc3R5bGUuZm9udC1zaXplXT1cImZvbnRTaXplICsgJ3B4J1wiIFtuZ0NsYXNzXT1cInsnbmctY291bnRlci0td2l0aC1jaXJjbGUnIDogc2hvd0NpcmNsZX1cIj5cbiAgICA8ZGl2IGNsYXNzPVwibmctY291bnRlcl9fdGV4dFwiPlxuICAgICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiIWZpbmlzaGVkQ291bnRpbmcgfHwgIWZpbmlzaGVkVGV4dC5sZW5ndGhcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmctY291bnRlcl9fcHJlZml4XCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmctY291bnRlci1wcmVmaXhcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm5nLWNvdW50ZXJfX251bWJlclwiPnt7Y291bnR9fTwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmctY291bnRlcl9fc3VmZml4XCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmctY291bnRlci1zdWZmaXhcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDxuZy10ZW1wbGF0ZSBbbmdJZl09XCJmaW5pc2hlZENvdW50aW5nICYmIGZpbmlzaGVkVGV4dC5sZW5ndGhcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibmctY291bnRlcl9fZmluaXNoX3RleHRcIj57e2ZpbmlzaGVkVGV4dH19PC9zcGFuPlxuICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJuZy1jb3VudGVyX19jaXJjbGVcIiAqbmdJZj1cInNob3dDaXJjbGVcIiBbbmdTdHlsZV09XCJnZXRDaXJjbGVTdHlsZSgpXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJuZy1jb3VudGVyX19jaXJjbGVfX2JhclwiIFtuZ1N0eWxlXT1cImdldEJhclN0eWxlKClcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5nLWNvdW50ZXJfX2NpcmNsZV9fZmlsbFwiIFtuZ1N0eWxlXT1cImdldEZpbGxTdHlsZSgpXCI+PC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5gLFxuICAgIHN0eWxlczogW2AubmctY291bnRlcntkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtmb250LXNpemU6MTUwcHh9Lm5nLWNvdW50ZXIubmctY291bnRlci0td2l0aC1jaXJjbGV7d2lkdGg6MWVtO2hlaWdodDoxZW07Ym94LXNpemluZzpjb250ZW50LWJveH0ubmctY291bnRlci5uZy1jb3VudGVyLS13aXRoLWNpcmNsZSAubmctY291bnRlcl9fdGV4dHthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtoZWlnaHQ6MWVtfS5uZy1jb3VudGVyX190ZXh0e2Rpc3BsYXk6ZmxleH0ubmctY291bnRlcl9fZmluaXNoX3RleHQsLm5nLWNvdW50ZXJfX251bWJlciwubmctY291bnRlcl9fcHJlZml4LC5uZy1jb3VudGVyX19zdWZmaXh7Zm9udC1zaXplOi4zZW19Lm5nLWNvdW50ZXJfX2NpcmNsZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MWVtO2hlaWdodDoxZW07Ym94LXNpemluZzpjb250ZW50LWJveH0ubmctY291bnRlcl9fY2lyY2xlX19iYXIsLm5nLWNvdW50ZXJfX2NpcmNsZV9fZmlsbHtwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6LjA4ZW0gc29saWQ7d2lkdGg6Ljg0ZW07aGVpZ2h0Oi44NGVtO2NsaXA6cmVjdCgwLC41ZW0sMWVtLDApO2JvcmRlci1yYWRpdXM6NTAlO2JveC1zaXppbmc6Y29udGVudC1ib3h9YF0sXG59KVxuZXhwb3J0IGNsYXNzIENvdW50ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIEBJbnB1dCgpIG1vZGU6IHN0cmluZyA9ICdvbkluaXQnO1xuICAgIEBJbnB1dCgpIGZyb206IG51bWJlciA9IDA7XG4gICAgQElucHV0KCkgdG86IG51bWJlciA9IDA7XG4gICAgQElucHV0KCkgb2Y6IG51bWJlcjtcbiAgICBASW5wdXQoKSBhbmltYXRpb25UaW1lOiBudW1iZXIgPSA0MDAwO1xuICAgIEBJbnB1dCgpIGFuaW1hdGlvblR5cGU6IHN0cmluZyA9ICdsaW5lYXInO1xuICAgIEBJbnB1dCgpIHNob3dDaXJjbGU6IGJvb2xlYW4gPSB0cnVlO1xuICAgIEBJbnB1dCgpIGNpcmNsZUNvbG9yOiBzdHJpbmcgPSAnIzMwN2JiYic7XG4gICAgQElucHV0KCkgZm9udFNpemU6IG51bWJlciA9IDE1MDtcbiAgICBASW5wdXQoKSBkZWxheTogbnVtYmVyID0gMDtcbiAgICBASW5wdXQoKSBmaW5pc2hlZFRleHQ6IHN0cmluZyA9ICcnO1xuICAgIEBPdXRwdXQoKSBmaW5pc2hlZCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICBwcml2YXRlIF9ob2xkOiBib29sZWFuID0gdHJ1ZTtcbiAgICBwcml2YXRlIF9jb3VudDogbnVtYmVyO1xuICAgIHByaXZhdGUgX3N0YXJ0VGltZTogbnVtYmVyO1xuICAgIHByaXZhdGUgX3BlcmNlbnREb25lOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX2hvbGRQcm9ncmVzczogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIF9uYXRpdmVFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIF9zdGFydFRpbWVvdXQ7XG4gICAgcHJpdmF0ZSBfZmluaXNoZWRDb3VudGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddKVxuICAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnLCBbJyRldmVudCddKVxuICAgIG9uV2luZG93Q2hhbmdlKCRldmVudCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSAndmlld3BvcnQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG9sZCAmJiB0aGlzLmlzRWxlbWVudEluVmlld3BvcnQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBob3N0RWxlbWVudDogRWxlbWVudFJlZikge1xuICAgICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQgPSBob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIGdldCBzdGFydFRpbWVvdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdGFydFRpbWVvdXQ7XG4gICAgfVxuXG4gICAgc2V0IHN0YXJ0VGltZW91dCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zdGFydFRpbWVvdXQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgbmF0aXZlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYXRpdmVFbGVtZW50O1xuICAgIH1cblxuICAgIHNldCBuYXRpdmVFbGVtZW50KHZhbHVlOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9uYXRpdmVFbGVtZW50ID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGhvbGRQcm9ncmVzcygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5faG9sZFByb2dyZXNzO1xuICAgIH1cblxuICAgIHNldCBob2xkUHJvZ3Jlc3ModmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9ob2xkUHJvZ3Jlc3MgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgcGVyY2VudERvbmUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BlcmNlbnREb25lO1xuICAgIH1cblxuICAgIHNldCBwZXJjZW50RG9uZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3BlcmNlbnREb25lID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGNvdW50KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb3VudDtcbiAgICB9XG5cbiAgICBzZXQgY291bnQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9jb3VudCA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBzdGFydFRpbWUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0VGltZTtcbiAgICB9XG5cbiAgICBzZXQgc3RhcnRUaW1lKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRUaW1lID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGhvbGQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ob2xkO1xuICAgIH1cblxuICAgIHNldCBob2xkKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX2hvbGQgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgZmluaXNoZWRDb3VudGluZygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmlzaGVkQ291bnRpbmc7XG4gICAgfVxuXG4gICAgc2V0IGZpbmlzaGVkQ291bnRpbmcodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fZmluaXNoZWRDb3VudGluZyA9IHZhbHVlO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXkgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QWN0aW9uKCk7XG4gICAgICAgICAgICB9LCB0aGlzLmRlbGF5KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0QWN0aW9uKCk7XG4gICAgfVxuXG4gICAgc3RvcCgpOiB2b2lkIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnN0YXJ0VGltZW91dCk7XG4gICAgICAgIHRoaXMuaG9sZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcmVzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ob2xkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jb3VudCA9IHRoaXMuZnJvbTtcbiAgICAgICAgdGhpcy5ob2xkUHJvZ3Jlc3MgPSAwO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5wZXJjZW50RG9uZSA9IDA7XG4gICAgICAgIHRoaXMuZmluaXNoZWRDb3VudGluZyA9IGZhbHNlO1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc3RhcnRUaW1lb3V0KTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9mID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5vZiA9IHRoaXMudG87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ29uSW5pdCcpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldENpcmNsZVN0eWxlKCk6IGFueSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAnY2xpcCc6IHRoaXMucGVyY2VudERvbmUgPj0gMC41ID8gJ3JlY3QoYXV0bywgYXV0bywgYXV0bywgYXV0byknIDogJ3JlY3QoMGVtLCAxZW0sIDFlbSwgMC41ZW0pJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEJhclN0eWxlKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IHJvdGF0ZURlZyA9IDM2MCAqIHRoaXMucGVyY2VudERvbmU7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHJvdGF0ZSgke3JvdGF0ZURlZ31kZWcpYCxcbiAgICAgICAgICAgICdib3JkZXItY29sb3InOiB0aGlzLmNpcmNsZUNvbG9yXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0RmlsbFN0eWxlKCk6IGFueSB7XG4gICAgICAgIGNvbnN0IHJvdGF0ZURlZyA9IHRoaXMucGVyY2VudERvbmUgPiAwLjUgPyAxODAgOiAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ2Rpc3BsYXknOiB0aGlzLnBlcmNlbnREb25lIDw9IDAuNSA/ICdub25lJyA6ICdibG9jaycsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogYHJvdGF0ZSgke3JvdGF0ZURlZ31kZWcpYCxcbiAgICAgICAgICAgICdib3JkZXItY29sb3InOiB0aGlzLmNpcmNsZUNvbG9yXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydEFjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5ob2xkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVxdWVzdEZyYW1lKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGVwKHRpbWVzdGFtcCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSB0aW1lc3RhbXAgLSB0aGlzLnN0YXJ0VGltZTtcbiAgICAgICAgcHJvZ3Jlc3MgKz0gdGhpcy5ob2xkUHJvZ3Jlc3M7XG4gICAgICAgIGlmICh0aGlzLmhvbGQpIHtcbiAgICAgICAgICAgIHRoaXMuaG9sZFByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlYXNlVmFsdWUgPSBlYXNlW3RoaXMuYW5pbWF0aW9uVHlwZV0ocHJvZ3Jlc3MgLyB0aGlzLmFuaW1hdGlvblRpbWUpO1xuICAgICAgICBsZXQgY3VycmVudENvdW50ID0gTWF0aC5yb3VuZChlYXNlVmFsdWUgKiB0aGlzLnRvKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCA+PSB0aGlzLnRvKSB7XG4gICAgICAgICAgICBjdXJyZW50Q291bnQgPSB0aGlzLnRvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY291bnQgPSBjdXJyZW50Q291bnQ7XG4gICAgICAgIHRoaXMucGVyY2VudERvbmUgPSBjdXJyZW50Q291bnQgLyB0aGlzLm9mO1xuICAgICAgICBpZiAocHJvZ3Jlc3MgPCB0aGlzLmFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdEZyYW1lKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmluaXNoZWRcbiAgICAgICAgdGhpcy5maW5pc2hlZENvdW50aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5maW5pc2hlZC5lbWl0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXF1ZXN0RnJhbWUoKTogdm9pZCB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGVwLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNFbGVtZW50SW5WaWV3cG9ydCgpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHJlY3QudG9wID49IDAgJiZcbiAgICAgICAgICAgIHJlY3QuYm90dG9tIDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodClcbiAgICAgICAgKTtcbiAgICB9XG59XG4iXX0=